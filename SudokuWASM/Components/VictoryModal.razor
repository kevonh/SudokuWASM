<!-- Victory Modal -->
@if (IsVisible)
{
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl p-6 sm:p-8 w-full max-w-sm sm:max-w-md text-center">
            <div class="text-4xl sm:text-6xl mb-4 text-green-500">
                <i class="bi bi-trophy-fill"></i>
            </div>
            @if (HintCount == 0 && WrongGuessCount == 0)
            {
                <div class="text-xl sm:text-2xl mb-2">?? PERFECT GAME! ??</div>
            }
            <h2 class="text-2xl sm:text-3xl font-bold text-green-600 mb-2">Puzzle Complete!</h2>
            <div class="text-3xl sm:text-4xl font-bold text-purple-600 mb-2">@Score.ToString("N0")</div>
            <div class="text-sm text-gray-500 mb-4">FINAL SCORE</div>
            <div class="grid grid-cols-3 gap-3 sm:gap-4 mb-6 text-sm">
                <div class="text-center">
                    <div class="text-lg sm:text-xl font-bold text-gray-700">@ElapsedTime</div>
                    <div class="text-gray-500">Time</div>
                </div>
                <div class="text-center">
                    <div class="text-lg sm:text-xl font-bold text-red-600">@WrongGuessCount</div>
                    <div class="text-gray-500">Wrong</div>
                </div>
                <div class="text-center">
                    <div class="text-lg sm:text-xl font-bold text-blue-600">@HintCount</div>
                    <div class="text-gray-500">Hints</div>
                </div>
            </div>
            <div class="text-base sm:text-lg font-semibold text-gray-700 mb-6">@Difficulty Difficulty</div>
            <button class="bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center gap-2 mx-auto touch-manipulation"
                    @onclick="OnPlayAgain">
                <span>Play Again</span>
                <i class="bi bi-arrow-clockwise"></i>
            </button>
        </div>
    </div>
}

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public int Score { get; set; }
    [Parameter] public string ElapsedTime { get; set; } = "00:00";
    [Parameter] public int WrongGuessCount { get; set; }
    [Parameter] public int HintCount { get; set; }
    [Parameter] public string Difficulty { get; set; } = "Medium";
    [Parameter] public EventCallback OnPlayAgain { get; set; }
}